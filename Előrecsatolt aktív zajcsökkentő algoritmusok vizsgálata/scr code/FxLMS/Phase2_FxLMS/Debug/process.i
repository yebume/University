# 1 "process.c"
# 1 "tt.h"









# 1 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\cdef21364.h"






 

 





 





# 1 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"






 













 








# 58 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"


# 107 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"


# 155 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"


# 203 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"


# 217 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"


# 229 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"




# 248 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"







# 303 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"








# 317 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"






















# 346 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"









# 361 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"




 
# 378 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"
































# 421 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"

# 433 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"

# 445 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"

# 22 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\cdef21364.h"

# 11 "tt.h"
# 1 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21364.h"






 










# 1 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"



















 


























































































 





# 149 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"








# 185 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 234 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 282 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 330 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 344 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 356 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"




# 375 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"







# 430 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"








# 444 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"






















# 473 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"









# 488 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"





# 505 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"













# 529 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"

# 541 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"

# 553 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"

# 565 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 574 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"





# 600 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 611 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"



# 645 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"

# 669 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"



# 680 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"

# 691 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 721 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 751 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 780 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 806 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"



# 825 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"

# 842 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"








# 867 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"



# 892 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 915 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"






# 941 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"






# 954 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"







# 970 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 986 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 1289 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 1366 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"







# 1417 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 1431 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 1440 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 1521 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"




























# 1555 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"








# 1583 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 1605 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 1636 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 1651 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 1678 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"




# 1708 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"



# 1735 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"




# 1755 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"































# 1794 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"










# 1834 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 1861 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 1883 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"






















# 1933 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"

 
# 1942 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"







# 1981 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 2015 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 2026 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 2052 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 2086 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 2120 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"



# 2131 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"



# 2158 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


            









# 2202 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 2236 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"



 
# 2247 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"

 
# 2256 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"

 
# 2265 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"

 
# 2274 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"

 










 










 










 










 





 





 





 








# 2378 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 2412 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"











# 19 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21364.h"



# 12 "tt.h"
# 1 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\signal.h"






 




# 40 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\signal.h"

 

# 86 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\signal.h"

 
 
# 160 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\signal.h"

 

# 212 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\signal.h"

 








# 246 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\signal.h"
                                

                                
# 264 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\signal.h"

# 294 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\signal.h"






 


# 310 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\signal.h"








 

typedef int sig_atomic_t;





void (*signal(int _sig, void (*func)(int))) (int);
void (*signalf(int _sig, void (*func)(int))) (int);
void (*signals(int _sig, void (*func)(int))) (int);
void (*signalcb(int _sig, void (*func)(int))) (int);
void (*signalss(int _sig, void (*func)(int))) (int);

void (*signalnsm(int _sig, void (*func)(int))) (int);
void (*signalfnsm(int _sig, void (*func)(int))) (int);
void (*signalsnsm(int _sig, void (*func)(int))) (int);
void (*signalcbnsm(int _sig, void (*func)(int))) (int);
void (*signalssnsm(int _sig, void (*func)(int))) (int);

void (*interrupt(int _sig, void (*func)(int))) (int);
void (*interruptf(int _sig, void (*func)(int))) (int);
void (*interrupts(int _sig, void (*func)(int))) (int);
void (*interruptcb(int _sig, void (*func)(int))) (int);
void (*interruptss(int _sig, void (*func)(int))) (int);

void (*interruptnsm(int _sig, void (*func)(int))) (int);
void (*interruptfnsm(int _sig, void (*func)(int))) (int);
void (*interruptsnsm(int _sig, void (*func)(int))) (int);
void (*interruptcbnsm(int _sig, void (*func)(int))) (int);
void (*interruptssnsm(int _sig, void (*func)(int))) (int);

int raise(int);
int raisensm(int);

int clear_interrupt(int _sig);







# 13 "tt.h"











#pragma optimize_off
extern void InitPLL(void);
extern void process(void);

extern void InitDAI(void);
extern void DAIsigInit(void);
extern void setDAIproc(void);
extern void clrDAIproc(void);

extern float conv_asm( float * coef, float * inCur, float * inBase, unsigned int bufSize);	

extern void Init1835viaSPI(void);

extern void InitSPORT(void);
extern void receive(int);
extern void ClearSPORT(void);

extern void SetupSPI1835 () ;
extern void DisableSPI1835 () ;
extern void Configure1835Register (int i) ;
extern unsigned int Get1835Register (int i) ;
extern void Init1835viaSPI_PowerDwn();

extern void SetupIRQ12 () ;
extern void Irq1ISR (int i) ;
extern void Irq2ISR (int i) ;

extern void Delay (int i) ;


extern int isProcessing;
extern int dataReady;



extern unsigned int Block_A[2] ;
extern unsigned int Block_B[2] ;
extern unsigned int Block_C[2] ;


extern float rightIn  , leftIn;
extern float rightOut1, leftOut1;
extern float rightOut2, leftOut2;
extern float rightOut3, leftOut3;
extern float rightOut4, leftOut4;

extern int rightIn_i  , leftIn_i;
extern int rightOut1_i, leftOut1_i;
extern int rightOut2_i, leftOut2_i;
extern int rightOut3_i, leftOut3_i;
extern int rightOut4_i, leftOut4_i;






# 2 "process.c"
# 1 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\stdlib.h"






 

#pragma once

#pragma system_header /* stdlib.h */





# 24 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\stdlib.h"












  typedef long unsigned int size_t;




  typedef int wchar_t;



typedef struct {int quot; int rem;} div_t;
typedef struct {long int quot; long int rem;} ldiv_t;





  div_t  div(int _numer, int _denom);
  ldiv_t ldiv(long _numer, long _denom);





# 67 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\stdlib.h"









 




  int __atoiD(const char __dm *_a);
  int __atoiP(const char __pm *_a);

  long __atolD(const char __dm *_a);
  long __atolP(const char __pm *_a);

  long __strtolDD(const char __dm *_a, char __dm **_b, int _base);
  long __strtolDP(const char __dm *_a, char __pm **_b, int _base);
  long __strtolPD(const char __pm *_a, char __dm **_b, int _base);
  long __strtolPP(const char __pm *_a, char __pm **_b, int _base);

  unsigned long __strtoulDD(const char __dm *a, char __dm **b, int _base);
  unsigned long __strtoulDP(const char __dm *a, char __pm **b, int _base);
  unsigned long __strtoulPD(const char __pm *a, char __dm **b, int _base);
  unsigned long __strtoulPP(const char __pm *a, char __pm **b, int _base);

# 172 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\stdlib.h"

  int atoi(const char *a);


  long atol(const char *a);


  long strtol(const char *a, char **b, int _base);


  unsigned long strtoul(const char *a, char **b, int _base);














 




  float __atoffD(const char __dm *_bptr);
  float __atoffP(const char __pm *_bptr);

  long double __atofD(const char __dm *_bptr);
  long double __atofP(const char __pm *_bptr);

_Pragma(""linkage_name ___atofD")            _Pragma("linkage_name ___atofD")
  long double atold(const char *_bptr);

  float __strtodfDD(const char __dm *_nptr, char __dm **_endptr);
  float __strtodfDP(const char __dm *_nptr, char __pm **_endptr);
  float __strtodfPD(const char __pm *_nptr, char __dm **_endptr);
  float __strtodfPP(const char __pm *_nptr, char __pm **_endptr);

  long double __strtodDD(const char __dm *_nptr, char __dm **_endptr);
  long double __strtodDP(const char __dm *_nptr, char __pm **_endptr);
  long double __strtodPD(const char __pm *_nptr, char __dm **_endptr);
  long double __strtodPP(const char __pm *_nptr, char __pm **_endptr);

_Pragma(""linkage_name ___strtodDD")            _Pragma("linkage_name ___strtodDD")
  long double strtold(const char *_nptr, char **_endptr);


# 297 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\stdlib.h"


  double atof(const char *_bptr);

  double strtod(const char *_nptr, char **_endptr);







# 316 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\stdlib.h"







 




  int  abs(int _j);
  int  avg(int _a, int _b);
  int  max(int _a, int _b);
  int  min(int _a, int _b);
  int  clip(int _a, int _b);

  long labs(long _j);
  long lavg(long _a, long _b);
  long lmax(long _a, long _b);
  long lmin(long _a, long _b);
  long lclip(long _a, long _b);

# 349 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\stdlib.h"

# 364 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\stdlib.h"

# 408 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\stdlib.h"








 




  int    rand(void);
  void   srand(unsigned int _seed);

  void  *calloc(size_t _nmemb, size_t _size);
  void  *malloc(size_t _size);
  void  *realloc(void *_prt, size_t _size);
  void   free(void *_ptr);

#pragma noreturn
  void   abort(void);
#pragma noreturn
_Pragma(""linkage_name __exit")
_Pragma("linkage_name __exit")

  void   exit(int _status);

  char  *getenv(const char *_name);
  int    system(const char *_string);


  typedef void _t_atexit_fp(void);
  typedef int _t_compare_fp(const void *, const void *);

  int   atexit(_t_atexit_fp);

  void *bsearch(const void*, const void*, size_t, size_t, _t_compare_fp);
  void  qsort(void*, size_t, size_t, _t_compare_fp);

# 474 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\stdlib.h"







 




  int    _heap_lookup_name(char * _heap_name);
  void  *_heap_calloc(int _heap_index, size_t _nmemb, size_t _size);
  void   _heap_free(int _heap_index, void *_ptr);
  void  *_heap_malloc(int _heap_index, size_t _size);
  void  *_heap_realloc(int _heap_index, void *_prt, size_t _size);
  int    _heap_install(void *base, size_t length, int userid, int pmdm  );


  int    _heap_switch(int _heap_index);
  int    set_alloc_type(char * _heap_name);






# 508 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\stdlib.h"











 




  int count_ones(int x);
  
_Pragma(""linkage_name _count_ones")                   _Pragma("linkage_name _count_ones")
  int lcount_ones(long x);








# 3 "process.c"
# 1 "filt_num.h"

# 4 "process.c"











float buff_tmp[(100)] = {};
int i_tmp = 0;

#pragma align 4
float __dm input1R[(500)+1];
#pragma align 4
float __dm input1L[(500)+1];

#pragma align 4
float __dm input2R[(2000)+1];
#pragma align 4
float __dm input2L[(2000)+1];

#pragma align 4
float __dm input3R[(500)+1];
#pragma align 4
float __dm input3L[(500)+1];

#pragma align 4
float __dm input1R2[(500)+1];

#pragma align 4
float __dm input2R2[(2000)+1];




extern float __dm inputR[(41)+1];

extern float __dm inputL[(41)+1];

extern float __dm noiseN[(41)+1];



#pragma optimize_for_speed
int i1 = 0;
int i2 = 0;
int i3 = 0;
int j;
int k;
int k_input;
int ix;




int m1 = 0;
int m2 = 0;
int m3 = 0;
float out_2;
extern float out_1;
extern int i_dec;
extern float out_test1;



int fxlmsFlag = 0;
int identFlag = 0;
int ident3Flag = 0;
int resetFlag = 1;

int delayCtnrLimit = 2500;
int delayCtnr=0;
int delayCtnr2=0;
int delayCtnr3=0;
int delayCtnr4=0;
int delayCtnr5=0;
int delayCtnrIdnet=0;
int delayCtnrIdnetLimit=500000;	

int flagTest(int mask);
int readDAIpin(int mask);
void handle_LED(int led_value);
int led_value=0;


#pragma align 4
float __pm coefs_dec[(41)] = {
# 1 "coef_dec.dat"
-0.001274,
-0.007595,
-0.010702,
-0.017447,
-0.024815,
-0.032741,
-0.040185,
-0.046046,
-0.049109,
-0.048231,
-0.042517,
-0.031473,
-0.015152,
0.005806,
0.030144,
0.056110,
0.081607,
0.104415,
0.122456,
0.134026,
0.138010,
0.134026,
0.122456,
0.104415,
0.081607,
0.056110,
0.030144,
0.005806,
-0.015152,
-0.031473,
-0.042517,
-0.048231,
-0.049109,
-0.046046,
-0.040185,
-0.032741,
-0.024815,
-0.017447,
-0.010702,
-0.007595,
-0.001274,
# 95 "process.c"
	};  
float __dm inRdata;
float __dm inLdata;
float __dm inNoise;
float inNoiseArray1[(500)+1];
float inNoiseArray3[(500)+1];


float coefs_filter_1 [(500)] = {
# 1 "A2.dat"
0.0020126714,
0.00039479297,
-0.0030095535,
-0.002906658,
0.0013120824,
0.0030201019,
0.0015033011,
9.3351046E-005,
-7.6468219E-005,
-0.0011393154,
-0.0026663737,
-0.0009958992,
0.0016195575,
0.0015122145,
0.00089273939,
0.001776601,
0.00026125732,
-0.0027817914,
0.0072099511,
0.033954248,
-0.025542257,
-0.20035025,
-0.087009907,
0.34573811,
0.33874837,
-0.099850126,
-0.2304242,
-0.037430286,
0.066584907,
-0.01850076,
-0.05684083,
0.035064116,
0.023980491,
-0.050653078,
-0.014796563,
0.0074537457,
-0.050391838,
-0.040498167,
0.041800663,
0.025106432,
-0.056951877,
-0.036537487,
0.020438846,
0.0085541252,
-0.0041514453,
0.010384067,
0.002570841,
-0.015487394,
-0.0067354725,
0.0055472581,
-0.005111116,
-0.0089158686,
0.0049235472,
0.0016695454,
-0.0074537746,
0.015665755,
0.032195479,
-0.0029409446,
-0.028415946,
0.0009708546,
0.015120042,
-0.0092892647,
-0.00084392529,
0.03264733,
0.016614657,
-0.023370974,
-0.015042687,
0.013549294,
0.0054937825,
-0.011720483,
6.8205809E-005,
0.015592853,
0.009609024,
0.0030256656,
0.011593316,
0.014919444,
0.0020982625,
-0.011744067,
-0.012281316,
0.00078649429,
0.013117466,
0.010344174,
-0.0016808825,
-0.0076909494,
-0.0042440607,
0.0020711925,
0.0061527546,
0.0043242224,
-0.0003191237,
-0.0025225843,
-0.0023671521,
0.00035698604,
0.0042708791,
0.0047474657,
-0.00050696149,
-0.0072035859,
-0.0079275249,
-0.00048840675,
0.0046947887,
-0.00091414782,
-0.0074770311,
-0.0048528682,
0.00048611686,
-0.00042742916,
-0.0023914352,
0.002228321,
0.0060928017,
0.00019508709,
-0.0067231287,
-0.0050208746,
-0.0017009679,
-0.00047379747,
0.0019425903,
0.0015860134,
-0.0019737093,
-0.0022935634,
-0.00092777854,
-0.0020936839,
-0.0038377275,
-0.00096335396,
0.0074055446,
0.01148875,
0.0026120322,
-0.0081665069,
-0.0086768996,
-0.0027054204,
0.0042250296,
0.005791137,
-1.3225019E-005,
-0.0036489281,
0.00074463605,
0.0028191642,
-0.0037386604,
-0.0061144573,
0.0027267567,
0.0064809229,
-0.0027873248,
-0.009467843,
-0.0037250293,
0.0050219782,
0.006268065,
0.00067286834,
-0.0030744148,
-0.00018203845,
0.0039701946,
0.002608072,
-0.00151142,
-0.0029484818,
-0.00082092371,
0.0028477851,
0.0031308956,
0.0015593896,
0.0019584484,
-0.00013780101,
-0.0024499632,
-0.00020217076,
0.0010623258,
0.00081977661,
0.0021633334,
0.00060792192,
-0.0026210931,
-0.0012561069,
0.0016110213,
0.003689877,
0.0044093328,
-0.00078590878,
-0.0073468322,
-0.0047144443,
0.0046904329,
0.0070916121,
0.00087019452,
-0.0021899517,
-0.0020398139,
-0.0014288855,
0.0021774287,
0.0030224521,
-0.000281755,
-0.0013138575,
-0.00081031787,
-0.0020189923,
-0.0021859915,
0.002002303,
0.0060563381,
0.0024449017,
-0.0050561735,
-0.0048969551,
0.00095672533,
0.0025010381,
0.0023515597,
0.0046872334,
0.0022952133,
-0.0050767129,
-0.0060351081,
0.00097098714,
0.0047139428,
0.0023623246,
0.00029087081,
-0.00035584276,
-0.0033697342,
-0.0045917984,
7.2005772E-005,
0.0019382517,
-0.0018382695,
-0.0022608163,
0.0012575093,
0.001464701,
0.00010052653,
0.0013162091,
-0.00014407962,
-0.0039629983,
-0.00092496199,
0.0040327711,
0.0014186975,
-0.0039697853,
-0.0039976486,
0.00025633181,
0.0014749584,
-0.0013082525,
-0.0010670085,
0.0022902351,
0.0024682742,
-0.0013811514,
-0.0031247174,
-0.0032379928,
-0.0027017591,
-0.00011970336,
0.00017585675,
0.00018499971,
0.0030823839,
0.0013883184,
-0.0033834709,
-0.0021586893,
0.0019423432,
0.0011212039,
-0.0016469569,
0.00061087601,
0.0028609352,
0.0012836002,
-0.00012089466,
0.00085956528,
0.0023028278,
0.00099821202,
-0.001948028,
-0.0028863568,
-0.0015087343,
-0.00021689608,
-6.7309506E-005,
0.0012715701,
0.0029620077,
0.0019594133,
-0.0017078025,
-0.0045109321,
-0.0015909534,
0.0046200827,
0.0048055402,
-0.001266547,
-0.0052361279,
-0.0022091151,
0.002637702,
0.0017020032,
-0.0024519013,
-0.0011068131,
0.0023714828,
0.00016930483,
-0.0047351504,
-0.0041827839,
0.00084541936,
0.0026731535,
0.0010717062,
0.00055016292,
0.00093897153,
-0.00015969791,
-0.0027829099,
-0.0023979745,
0.0017543166,
0.0042662718,
0.0035182023,
0.00025132627,
-0.0026604533,
-0.00058671279,
0.0028508997,
0.00078332651,
-0.0027280096,
-0.0012991646,
0.0032429905,
0.004012662,
-0.00018697942,
-0.0024888073,
-0.0013155191,
-0.0028440503,
-0.0037500076,
0.00049296964,
0.002388184,
-0.00050574116,
-0.00145982,
-0.00014828669,
-0.00029295331,
-0.0005507695,
-0.00023190903,
-0.00052516127,
-0.00035882019,
0.0012771785,
0.0016933181,
-0.0019192604,
-0.0053230459,
-0.0018252312,
0.0035478831,
0.0036068049,
0.00055219803,
-0.0019804502,
-0.0015129339,
-0.00033588789,
-0.00042521086,
0.0010519483,
0.0011053367,
-0.00038312605,
-0.00047566424,
0.00022366023,
0.00088926242,
-0.00045872221,
-0.0034661368,
-0.0033927339,
-0.00064745243,
0.00096609007,
0.0016117006,
0.0016358871,
-0.00023575078,
-0.0016450877,
-0.00048745752,
0.0024207346,
0.0040592342,
0.0010326301,
-0.0017451418,
0.0001865497,
0.0015348314,
0.00044053592,
0.00046311272,
0.00091188325,
7.2255461E-005,
-0.0004925938,
0.0013796148,
0.0035621512,
0.00097068888,
-0.002456279,
-0.0017774296,
-0.0005416965,
1.6053154E-005,
0.0001670162,
-0.0012182585,
-0.0016526105,
-0.0014501038,
-0.0007403866,
0.0014423145,
0.0016559905,
-0.00012406203,
0.0012173372,
0.0028457819,
0.0010870032,
-0.0009610554,
-0.00082757324,
-0.00027033596,
0.00016509823,
0.00084249687,
-0.0009321564,
-0.0029494828,
-0.0011546299,
0.00088518753,
-0.0014668917,
-0.002876326,
0.0016391105,
0.0050910134,
0.0022038736,
-0.0015391865,
-0.00060949725,
0.0016636796,
-0.0011344927,
-0.0051001641,
-0.0018158453,
0.004468753,
0.0035927293,
-0.0010166067,
-0.0022311038,
-0.0012751017,
-0.00041499556,
-0.00064519665,
-0.0012297911,
-0.00025297172,
0.00029917323,
-0.00045477628,
-0.00097045861,
-0.00062913477,
-0.0003644255,
-0.0005178799,
1.3893459E-005,
0.00084313267,
0.0014770266,
0.00029630464,
-0.0022792674,
-0.0029546844,
-0.0012278785,
0.00064791093,
0.0012285105,
-0.00025110287,
-0.0021827419,
-0.00071964588,
0.0024181718,
0.0014605193,
-0.0012278532,
0.00036883733,
0.0025740962,
0.0014262955,
0.00030456277,
-0.00073147542,
-0.0016514724,
-0.00033047251,
0.0012426198,
0.00025176397,
-0.00075572141,
4.0287887E-005,
-2.8387396E-005,
0.00096713327,
0.0024315021,
-0.0005578972,
-0.0033589376,
-0.0012801992,
0.001095248,
0.0014515363,
-0.0004354954,
-0.0024764717,
-0.00140283,
0.0011116065,
0.0023298813,
0.0012396942,
-0.00068800757,
-0.00026260439,
0.00015518843,
-0.0011364504,
-0.00099748722,
0.00060139305,
0.0012940391,
0.00066647923,
0.00070482749,
-0.00015363476,
-0.0011011043,
0.00018153933,
0.00060494081,
-0.00037330817,
-0.00065173174,
-0.00019741891,
-0.00017970451,
-0.00083813403,
-0.0011906492,
-0.00054590049,
0.001978369,
0.0022714036,
-0.0020260892,
-0.0010903589,
0.0040727821,
0.001765854,
-0.0030352096,
-0.0011610142,
0.0011205114,
-0.00027160236,
-0.0017228384,
0.00064837298,
0.004519376,
0.0024997198,
-0.0024934376,
-0.0022359395,
0.0016322676,
0.0015919561,
-0.0021890178,
-0.0030604366,
-0.00012861179,
0.003087962,
0.0028173488,
7.1060408E-006,
-0.0018241178,
-0.0019839164,
-0.00081115734,
-6.1556988E-005,
-0.0013364676,
0.00025671668,
0.0039400435,
0.0023566727,
-0.0027327258,
-0.0036363946,
-0.00090358767,
0.0010389539,
0.0018776478,
0.0017429767,
5.7285946E-005,
-0.0022787654,
-0.0023148821,
-0.00064589153,
-0.0011304762,
-0.00056544825,
0.0025506166,
0.0018915626,
-0.0026255441,
# 105 "process.c"
	};   
float un1 [(500)];
float mu1 = 0.0001;		
float yn1 =0;
float err1 = 0;

float coefs_filter_2 [(2000)]; 
float un2 [(2000)];
float performance = 0;
int AD_bit = 24;
int FS = 1677715;

float lambda = 0.01;			
float beta = 1;
float mu2 		= 0.05;		
float mu2def	= 0.05;		
								
									
									
								
									
									
float mu2_0 = 0.0005;			

float yn2 =0;
float err2 = 0;
float inputRfil_n = 0;
float inputRfil[(2000)+1];



float coefs_filter_3 [(500)] = {
# 1 "A3.dat"
0.00024943688,
2.4016766E-005,
-0.00044986428,
-0.0005612289,
4.2720381E-005,
0.0006366233,
0.00045545466,
-0.0001042461,
-0.00016723879,
-3.0887037E-005,
-0.00024193406,
-0.0002549561,
0.00011261422,
0.00019427805,
8.6659493E-006,
9.8494493E-005,
0.00025497231,
-2.6824205E-006,
-0.00025727227,
3.1882864E-005,
0.00014012992,
-0.00085209811,
-0.0010808544,
0.0013085274,
0.0028201141,
0.00074147678,
-0.0013693358,
-0.00098457583,
0.00034963546,
0.00031842967,
-0.0006324104,
-0.00041818697,
0.00026343769,
6.6260807E-005,
-0.00019210037,
5.2304553E-005,
2.149078E-005,
-0.00037718297,
-0.00023780412,
0.00013508131,
2.0783047E-005,
-0.00068219221,
-0.0017269129,
-0.00085314747,
0.002685589,
0.0045442656,
0.0021997578,
-0.0019224919,
-0.0033079141,
-0.00017041057,
0.0027045261,
0.0014010846,
-0.0015496246,
-0.0033540889,
-0.0029494313,
-0.00022604826,
0.001696684,
0.00047634947,
-0.0011897082,
-0.0011320804,
-0.00041822053,
0.00035142535,
0.00097373471,
0.0006952284,
-0.00010959945,
-0.00058297894,
-0.00063733233,
0.00020889481,
0.0011314712,
-0.00012801679,
-0.0018523664,
-0.00076476845,
0.0010952582,
0.0011732868,
0.0002663584,
-0.00069991773,
-0.00052798656,
0.00046888457,
0.00076728169,
0.00041812257,
0.00014800376,
0.00083368481,
0.0014672136,
-0.00010418191,
-0.0016881918,
-0.00035717941,
0.0018308084,
0.001340929,
-0.000764233,
-0.00097026129,
0.00030043622,
0.00060755765,
0.0001665071,
0.000338907,
0.00054218079,
1.971415E-006,
-8.1604936E-005,
0.00071539544,
0.00061303616,
-0.00061487331,
-0.0006681066,
0.00065675523,
0.0010257113,
-0.00029328407,
-0.0011997035,
-3.275316E-005,
0.0012071605,
0.00028766278,
-0.00098632311,
-0.00069371134,
-0.00020057654,
-0.00024703742,
-0.00025816311,
-0.00079165312,
-0.0010836538,
0.00014220101,
0.0011454565,
0.00039423545,
-0.00075476704,
-0.0007459647,
-0.00027847211,
-0.00026681868,
-5.7464163E-006,
0.00092192407,
0.0017078305,
0.00063326093,
-0.0015788092,
-0.0016603906,
-0.00030031745,
-0.00039967676,
-0.00048166575,
0.0011118688,
0.0014878293,
-0.00053793367,
-0.0014394731,
-0.0002996274,
0.0002214837,
-7.5940115E-005,
0.00043774923,
0.0010823073,
0.00023436689,
-0.00095208565,
-0.00040442523,
0.00067507214,
0.00021703972,
-0.0010909941,
-0.0010193532,
0.00061118387,
0.0012120304,
6.3351305E-005,
-0.00063042121,
-0.00023838709,
-0.00043057071,
-0.00080198649,
0.00046403988,
0.0016397751,
0.00034773705,
-0.001179219,
-0.00047088228,
0.00030936717,
-0.00049040961,
-0.00050502154,
0.00064380158,
0.00072482473,
-0.00023452725,
-0.00071291736,
-0.00034176832,
0.00018915419,
0.00041557947,
0.00049791409,
0.00053448428,
0.00035322655,
-6.7118049E-006,
-0.00016019632,
0.00032136374,
0.00069274346,
0.00015085841,
-0.00026435778,
-0.0003550908,
-0.000487321,
8.0786005E-005,
0.00075810938,
0.00087641529,
0.00071446912,
-0.00011917054,
-0.0010132507,
-0.00083777151,
-5.4577435E-005,
0.00071404042,
0.0011640416,
0.00034746015,
-0.0010935852,
-0.001097278,
6.3724729E-005,
0.00036112074,
-0.00045685348,
-0.00081391522,
0.00032588973,
0.0012122401,
0.00011092349,
-0.0011838715,
-0.00077201042,
0.00029505996,
0.00031207423,
-0.0001207025,
0.00014824545,
0.00012405266,
-0.00044302602,
-0.00029113749,
0.00037967996,
0.00022465613,
-0.00048005822,
-0.00022791086,
0.00045090157,
0.00017690465,
-0.00055962079,
-0.00060562248,
0.00011592602,
0.00054485194,
0.00033492118,
0.00022448679,
0.00036311644,
0.0004699151,
-2.2828477E-005,
-0.00073391444,
-0.00049903337,
2.8752684E-006,
0.00011782973,
0.00050766085,
0.00090217264,
0.00055309519,
-0.00039185208,
-0.00071720756,
-5.9028695E-005,
1.5306598E-005,
-0.00051768502,
-0.00032874048,
0.00051627663,
0.00077406911,
1.0168114E-005,
-0.00052871543,
-0.00012961192,
0.00020425471,
-4.8145954E-005,
-0.00035050357,
-0.0002444998,
6.5201108E-005,
0.00021072345,
0.00013206525,
-0.00018927689,
-0.00036867717,
-3.9516097E-005,
0.00018388446,
0.00038648469,
0.00050294783,
-0.0002064876,
-0.00091786537,
-0.0004591365,
0.00055482786,
0.00055007718,
-0.00032274722,
-0.00015679626,
0.00087258511,
0.00077402336,
-0.00039186,
-0.00074367499,
-0.00015079994,
0.0001249482,
0.00017235809,
0.00058744126,
0.00070775923,
0.00013389339,
-0.00047104782,
-0.00040817194,
-4.5004777E-005,
4.8100552E-005,
0.00039808551,
0.0010101293,
0.00060881337,
-0.00075400725,
-0.001271561,
-0.00028569283,
0.0004500059,
-0.00027563371,
-0.0004378343,
0.00047110175,
-7.9625199E-005,
-0.0010605638,
0.00024697004,
0.001320045,
-0.00017352976,
-0.0011979071,
-4.1340933E-005,
0.00080762227,
-1.6428223E-005,
-0.00083676435,
-0.00030804813,
0.00039679435,
-0.00016402719,
-0.00077645207,
0.0001027631,
0.00089411845,
-4.1473745E-006,
-0.0008584208,
-0.00028740318,
0.00038578952,
0.00020976273,
-0.00020342325,
-0.00032523926,
-0.00023018802,
0.00018532603,
0.00080198498,
0.00045484331,
-0.00066743675,
-0.00071578927,
0.0002857245,
0.0003001072,
-0.0006730645,
-0.00034679897,
0.0009742509,
0.00067765679,
-0.00042121351,
-0.00034796313,
-7.7517936E-005,
-0.00015366357,
0.0002339881,
0.00065613823,
0.00027937876,
-0.00013064365,
0.000334354,
0.00058920257,
-0.0001359194,
-0.0006503287,
-0.00033852432,
0.00021218963,
0.00030598772,
-0.00013069848,
-0.00020361204,
-4.2301235E-005,
-0.00011997271,
0.00012972776,
0.00056435529,
0.00044479829,
-0.00027026699,
-0.00068357447,
-8.7241169E-005,
0.00067213445,
0.00071955047,
0.00011319593,
-0.00057242817,
-0.00045439648,
-4.395912E-005,
5.6317276E-005,
0.0004793668,
0.00055492937,
-8.1803046E-005,
-0.00015740986,
0.00045180877,
0.00053191639,
-1.628009E-005,
-3.0381048E-005,
0.0002816754,
3.6537749E-005,
-0.00034299804,
-0.00035612166,
-0.00018881347,
6.7894485E-005,
5.1295516E-005,
-0.00026419273,
-0.00012209892,
-6.5599233E-005,
-0.00072142755,
-0.00059842243,
0.00055836746,
0.0007499936,
-0.00033467822,
-0.00081319222,
-0.0001790752,
0.00031963058,
-5.3322638E-006,
-0.00026499992,
0.00038285853,
0.00057448982,
-0.00054728589,
-0.0010101921,
-0.00012523074,
0.00054560945,
0.00043650306,
8.9424968E-005,
-0.00010070862,
-0.00014267677,
-6.141227E-006,
-0.00012563511,
-0.00052868342,
-0.00040857345,
2.5507793E-006,
0.00018599437,
0.00019609532,
3.6963265E-005,
-5.1004736E-005,
-0.00013675065,
-0.00033704145,
-0.00036307229,
-0.00010686561,
0.00043951304,
0.00065205415,
0.00014578435,
-0.00025919394,
0.00011709647,
0.00064663967,
0.0002888873,
-0.00014636088,
0.00047291483,
0.00068596413,
-0.00044752963,
-0.00075734558,
0.00028059294,
0.00026269798,
-0.00068502204,
-0.00043105462,
0.00041896576,
0.00011745823,
-0.00055486982,
-0.00033075936,
0.00020445246,
0.00019230123,
0.00031705649,
0.00067839213,
0.00038087976,
-0.00028871631,
-0.00027451501,
0.00013596653,
-0.00015448655,
-0.00050177303,
0.0001421839,
0.00072037335,
0.00043022656,
-0.00024244268,
-0.00074991386,
-0.00052824925,
0.00012250047,
0.0004057296,
0.00019033195,
-5.400358E-005,
-0.0002362518,
-0.00039651105,
0.00011376313,
0.00065783784,
0.00017695765,
-0.00030369198,
-0.00013249359,
-0.00024931133,
-0.00069631281,
-0.00035342004,
0.00062596699,
0.00057792669,
-8.1206585E-005,
-2.324542E-005,
5.246106E-006,
-0.00040447552,
-0.00018198238,
0.00044061689,
0.00032168676,
-0.00048596671,
-0.00070093543,
0.00028554501,
0.00090392114,
0.0001961563,
-0.00031900647,
-0.00027629774,
-0.00051906629,
-0.00024410847,
0.00061724131,
0.00054199662,
0.00013019037,
0.00051612518,
0.00044545269,
-0.00072903489,
-0.0011887798,
-0.00015410993,
0.00077198166,
0.00036491483,
-0.00024161517,
1.0967854E-005,
0.00029427392,
-6.7004985E-005,
-0.00027868405,
-1.3016304E-005,
3.1429387E-005,
-3.9132552E-005,
9.918493E-005,
6.2942927E-005,
-0.00023401565,
-0.00039579184,
-6.4824198E-005,
0.00052708306,
0.00051213778,
-0.00018535668,
-0.00041194932,
-0.00012795595,
# 138 "process.c"
	};
float mu3 = 0.0001;		
float yn3 =0;
float err3 = 0;
float yfila3=0;
float yn2array [(500)+1];
	
float noise1[(500)+1];
float noise2[(2000)+1];
float noise3[(500)+1];
float noise_n;
float noise[2000];
int noiseFlag = 0;

float RightInPrev=0;
float alpha=0.00001;

void process(void)
{
    
    
    isProcessing = 1;

    
    setDAIproc();    

	

	







	if(readDAIpin(1<<19)>0){		
	    led_value |= 1 << 3;
	} else{
	    led_value &= ~(1 << 3);
	}
	

	if(readDAIpin(1<<18)>0){		
	    led_value |= 1 << 2 ;
	} else{
	    led_value &= ~(1 << 2);
	}


	if(flagTest((0x00000010))!=0){			
	    led_value |= 1 << 1;
	} else{
	    led_value &= ~(1 << 1);
	}


	if(flagTest((0x00000004))!=0){			
	    led_value |= 1 << 0;
	} else{
	    led_value &= ~(1 << 0);
	}
	
	
	if(flagTest((0x00000010))!=0)	{delayCtnr++;}		
	if(flagTest((0x00000004))!=0)	{delayCtnr2++;}		
	if(readDAIpin(1<<19)>0 && readDAIpin(1<<18)>0)	{delayCtnr3++;}		
	if(readDAIpin(1<<19)>0)	{delayCtnr4++;}		
	if(readDAIpin(1<<18)>0)	{delayCtnr5++;}		
	
	
	
	if(!(flagTest((0x00000010))!=0) && delayCtnr >= delayCtnrLimit){			
	   	delayCtnr =0;
		if(fxlmsFlag == 0){fxlmsFlag = 1;}
	   	else {fxlmsFlag = 0;}
	}
	
	
	if(!(flagTest((0x00000004))!=0) && delayCtnr2 >= delayCtnrLimit){			
	   	delayCtnr2 =0;
		if(identFlag == 0){identFlag = 1;}
	   	else {identFlag = 0;}
	}
	
	
	
	if(readDAIpin(1<<18)>0 && resetFlag == 1){		
	    fxlmsFlag = 0;
	    mu2 = mu2def;
	    inputRfil_n = 0;
	    yfila3 = 0;
	    err2 = 0;
	    for(k=0; k<(2000);k++){
	    	coefs_filter_2[k] = 0;
	    }
	   	for(k=0; k<((500)+1);k++){
	    	input1R2[k] = 0;
	    	inNoiseArray1[k] = 0;
	    }
	    
	    for(k=0; k<((2000)+1);k++){
	    	input2R2[k] = 0;
	    	inputRfil[k] = 0;
	    }
	    
	    for(k=0; k<((500)+1);k++){
	    	yn2array[k] = 0;
	    	inNoiseArray3[k] = 0;
	    }
	}
	
	
	if(!(readDAIpin(1<<19)>0) && !(readDAIpin(1<<18)>0) && delayCtnr3 >= delayCtnrLimit){			
	   	delayCtnr3 =0;
		if(resetFlag == 1){resetFlag = 0;}
	   	else {resetFlag = 1;}
	}
	
	
	if(resetFlag == 0 && !(readDAIpin(1<<19)>0) && delayCtnr4 >= delayCtnrLimit){			
	   	delayCtnr4 =0;
		mu2 = mu2*2;
	}
	
	
	if(resetFlag == 0 && !(readDAIpin(1<<18)>0) && delayCtnr5 >= delayCtnrLimit){			
	   	delayCtnr5 =0;
		mu2 = mu2/2;
	}
	
	
	
	if(resetFlag == 1){			
	    led_value |= 1 << 4;
	    led_value |= 1 << 5;
	    led_value |= 1 << 6;
	    led_value |= 1 << 7;
	} 
	else{
	    led_value &= ~(1 << 4);
	    led_value &= ~(1 << 5);
	    led_value &= ~(1 << 6);
	    led_value &= ~(1 << 7);
	}
	
	
	if(identFlag == 1){			
	    led_value |= 1 << 0;
	} 
	else{
	    led_value &= ~(1 << 0);
	}
	
	
	if(fxlmsFlag == 1){			
	    led_value |= 1 << 1;
	} 
	else{
	    led_value &= ~(1 << 1);
	}
	
	
	if(ident3Flag == 1){			
	    led_value |= 1 << 2;
	} 
	else{
	    led_value &= ~(1 << 2);
	}
	
	




		if((identFlag==1) || (ident3Flag==1)){
		    
				noise_n = (float)(rand()<<1);
				noise_n = noise_n / (1<<31);
				
		    
			
		}



   
   
    
    

	    m1--;
		if (m1<0)
		{
			m1 = (500)-1;
		}
		
		m2--;
		if (m2<0)
		{
			m2 = (2000)-1;
		}
		
		m3--;
		if (m3<0)
		{
			m3 = (500)-1;
		}

		
		
		
	    
	    
	    	inRdata	= conv_asm( coefs_dec, &(inputR[i_dec]), inputR, (41));
			inLdata	= conv_asm( coefs_dec, &(inputL[i_dec]), inputL, (41));
			inNoise = noise_n;
			
			inNoiseArray1[m1] = inNoise;
			if (m1==0)
			{
			    inNoiseArray1[(500)] = inNoise;
			}
			inNoiseArray3[m3] = inNoise;
			if (m3==0)
			{
			    inNoiseArray3[(500)] = inNoise;
			}
			out_2 = rightIn;
		


		i_tmp--;
		if (0>i_tmp)
		{
	 		i_tmp = (100)-1;  
		}
		
		int i_minus1 = i_tmp - 1;
	
		if (i_tmp == 0)			
		{
			i_minus1 = (100)-1;
		}
	
		buff_tmp[i_tmp] = inLdata * inLdata; 
		performance = performance - (buff_tmp[i_minus1]/(100)) + (buff_tmp[i_tmp]/(100));
		

   
    
    



	



	if(identFlag == 1){			
	
		yn1 = 0;
		yn1 = conv_asm( coefs_filter_1, &(inNoiseArray1[m1]), inNoiseArray1, (500));		
		err1 = inLdata - yn1;
		
		k = 0; 
		k_input = m1;
		for(k; k<((500)); k++){  
		    coefs_filter_1[k] = coefs_filter_1[k] + mu1*err1*inNoiseArray1[k_input%(500)];		    
		    k_input++;
		    
		}
		delayCtnrIdnet++;
		
		if(delayCtnrIdnet == delayCtnrIdnetLimit/6){
		    identFlag=0; 
		    delayCtnrIdnet=0;
			ident3Flag = 1;    
		}
	}
		








	if(ident3Flag == 1){			

		
		yn3 = 0;
		yn3 = conv_asm( coefs_filter_3, &(inNoiseArray3[m3]), inNoiseArray3, (500));		
		err3 = inRdata - yn3;
		
		k = 0;
		k_input = m3;
		for(k; k<((500)); k++){  
		    coefs_filter_3[k] = coefs_filter_3[k] + mu3*err3*inNoiseArray3[k_input%(500)];	    	
		    k_input++;
		}
		
		delayCtnrIdnet++;
		
		if(delayCtnrIdnet == delayCtnrIdnetLimit/6){ident3Flag=0; delayCtnrIdnet=0;}
	}


	






	
	if(fxlmsFlag == 1){			
	
		yn2 = 0;

		input1R2[m1] = inRdata-yfila3;
		if(m1==0){
			input1R2[(500)] = inRdata-yfila3;
		}
		
		input2R2[m2] = inRdata-yfila3;
		
		if(m2==0){
			input2R2[(2000)] = inRdata-yfila3;
		}
		
		inputRfil_n = conv_asm( coefs_filter_1, &(input1R2[m1]), input1R2, (500));		
		inputRfil[m2] = inputRfil_n;		
		if(m2==0){
			inputRfil[(2000)] = inputRfil_n;
		}
					
		yn2 = -(conv_asm( coefs_filter_2, &(input2R2[m2]), input2R2, (2000)));		
		
		yn2array[m3] = yn2;
		if(m3==0){
			yn2array[(500)] = yn2;
		}

		yfila3 = conv_asm( coefs_filter_3, &(yn2array[m3]), yn2array, (500));							
		err2 = inLdata;
		k = 0;
		k_input = m2;
		

		
		mu2 = mu2_0 / (lambda + performance);
		
		for(k; k<(2000); k++){
		
		    coefs_filter_2[k] = coefs_filter_2[k] + mu2*err2*inputRfil[k_input%(2000)];		
			k_input++;
		}	

	}






	if(identFlag == 1){			
		out_1 = inNoiseArray1[m1];
	}

	if(fxlmsFlag == 1){			
	    out_1 = yn2;
	}	
	if(ident3Flag == 1){			
	    out_1 = inNoiseArray3[m3];
	}

	




	



	 


       

	
    clrDAIproc();    
	handle_LED(led_value);
	
      
    isProcessing = 0;
}

int flagTest(int mask){
        int tmpANC0;

        asm volatile(
                " %0 = flags;\n\t"
                : "=&d" (tmpANC0)
                :
                :
                );
return (   (tmpANC0&mask)    );

}



int readDAIpin(int mask){
int tmpR;

 	asm volatile(
 	     		"%0 = flags;\n\t"
 	     		: "=&F" (tmpR)
 	     		:
 	     		:
 	     		);

 	tmpR &= (0x10000000);
 	
     return ((*((volatile unsigned int *) 0x24B9))&mask);

}




void handle_LED(int led_value){
    *((volatile unsigned int *) 0x1800)=0;

    *((volatile unsigned int *) 0x1818)=(int)&led_value;  
    *((volatile unsigned int *) 0x1819)=1;
    *((volatile unsigned int *) 0x181a)=1;
    *((volatile unsigned int *) 0x1811)=1;
    *((volatile unsigned int *) 0x1812)=1;
    *((volatile unsigned int *) 0x1810)=0x400000;   

    *((volatile unsigned int *) 0x1800)=(0x00000200)|(0x00000040)|(0x00000002|0x00000004|0x00000020)|(0x00000100)|(0x00000001);
}


