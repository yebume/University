# 1 "process.c"
# 1 "tt.h"









# 1 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\cdef21364.h"






 

 





 





# 1 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"






 













 








# 58 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"


# 107 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"


# 155 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"


# 203 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"


# 217 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"


# 229 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"




# 248 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"







# 303 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"








# 317 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"






















# 346 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"









# 361 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"




 
# 378 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"
































# 421 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"

# 433 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"

# 445 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\Cdef21363.h"

# 22 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\cdef21364.h"

# 11 "tt.h"
# 1 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21364.h"






 










# 1 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"



















 


























































































 





# 149 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"








# 185 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 234 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 282 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 330 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 344 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 356 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"




# 375 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"







# 430 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"








# 444 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"






















# 473 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"









# 488 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"





# 505 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"













# 529 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"

# 541 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"

# 553 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"

# 565 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 574 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"





# 600 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 611 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"



# 645 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"

# 669 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"



# 680 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"

# 691 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 721 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 751 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 780 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 806 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"



# 825 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"

# 842 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"








# 867 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"



# 892 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 915 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"






# 941 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"






# 954 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"







# 970 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 986 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 1289 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 1366 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"







# 1417 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 1431 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 1440 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 1521 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"




























# 1555 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"








# 1583 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 1605 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 1636 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 1651 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 1678 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"




# 1708 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"



# 1735 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"




# 1755 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"































# 1794 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"










# 1834 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 1861 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 1883 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"






















# 1933 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"

 
# 1942 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"







# 1981 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 2015 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 2026 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 2052 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 2086 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 2120 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"



# 2131 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"



# 2158 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


            









# 2202 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 2236 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"



 
# 2247 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"

 
# 2256 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"

 
# 2265 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"

 
# 2274 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"

 










 










 










 










 





 





 





 








# 2378 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"


# 2412 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21363.h"











# 19 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\def21364.h"



# 12 "tt.h"
# 1 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\signal.h"






 




# 40 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\signal.h"

 

# 86 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\signal.h"

 
 
# 160 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\signal.h"

 

# 212 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\signal.h"

 








# 246 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\signal.h"
                                

                                
# 264 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\signal.h"

# 294 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\signal.h"






 


# 310 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\signal.h"








 

typedef int sig_atomic_t;





void (*signal(int _sig, void (*func)(int))) (int);
void (*signalf(int _sig, void (*func)(int))) (int);
void (*signals(int _sig, void (*func)(int))) (int);
void (*signalcb(int _sig, void (*func)(int))) (int);
void (*signalss(int _sig, void (*func)(int))) (int);

void (*signalnsm(int _sig, void (*func)(int))) (int);
void (*signalfnsm(int _sig, void (*func)(int))) (int);
void (*signalsnsm(int _sig, void (*func)(int))) (int);
void (*signalcbnsm(int _sig, void (*func)(int))) (int);
void (*signalssnsm(int _sig, void (*func)(int))) (int);

void (*interrupt(int _sig, void (*func)(int))) (int);
void (*interruptf(int _sig, void (*func)(int))) (int);
void (*interrupts(int _sig, void (*func)(int))) (int);
void (*interruptcb(int _sig, void (*func)(int))) (int);
void (*interruptss(int _sig, void (*func)(int))) (int);

void (*interruptnsm(int _sig, void (*func)(int))) (int);
void (*interruptfnsm(int _sig, void (*func)(int))) (int);
void (*interruptsnsm(int _sig, void (*func)(int))) (int);
void (*interruptcbnsm(int _sig, void (*func)(int))) (int);
void (*interruptssnsm(int _sig, void (*func)(int))) (int);

int raise(int);
int raisensm(int);

int clear_interrupt(int _sig);







# 13 "tt.h"











#pragma optimize_off
extern void InitPLL(void);
extern void process(void);

extern void InitDAI(void);
extern void DAIsigInit(void);
extern void setDAIproc(void);
extern void clrDAIproc(void);

extern float conv_asm( float * coef, float * inCur, float * inBase, unsigned int bufSize);	

extern void Init1835viaSPI(void);

extern void InitSPORT(void);
extern void receive(int);
extern void ClearSPORT(void);

extern void SetupSPI1835 () ;
extern void DisableSPI1835 () ;
extern void Configure1835Register (int i) ;
extern unsigned int Get1835Register (int i) ;
extern void Init1835viaSPI_PowerDwn();

extern void SetupIRQ12 () ;
extern void Irq1ISR (int i) ;
extern void Irq2ISR (int i) ;

extern void Delay (int i) ;


extern int isProcessing;
extern int dataReady;



extern unsigned int Block_A[2] ;
extern unsigned int Block_B[2] ;
extern unsigned int Block_C[2] ;


extern float rightIn  , leftIn;
extern float rightOut1, leftOut1;
extern float rightOut2, leftOut2;
extern float rightOut3, leftOut3;
extern float rightOut4, leftOut4;

extern int rightIn_i  , leftIn_i;
extern int rightOut1_i, leftOut1_i;
extern int rightOut2_i, leftOut2_i;
extern int rightOut3_i, leftOut3_i;
extern int rightOut4_i, leftOut4_i;






# 2 "process.c"
# 1 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\stdlib.h"






 

#pragma once

#pragma system_header /* stdlib.h */





# 24 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\stdlib.h"












  typedef long unsigned int size_t;




  typedef int wchar_t;



typedef struct {int quot; int rem;} div_t;
typedef struct {long int quot; long int rem;} ldiv_t;





  div_t  div(int _numer, int _denom);
  ldiv_t ldiv(long _numer, long _denom);





# 67 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\stdlib.h"









 




  int __atoiD(const char __dm *_a);
  int __atoiP(const char __pm *_a);

  long __atolD(const char __dm *_a);
  long __atolP(const char __pm *_a);

  long __strtolDD(const char __dm *_a, char __dm **_b, int _base);
  long __strtolDP(const char __dm *_a, char __pm **_b, int _base);
  long __strtolPD(const char __pm *_a, char __dm **_b, int _base);
  long __strtolPP(const char __pm *_a, char __pm **_b, int _base);

  unsigned long __strtoulDD(const char __dm *a, char __dm **b, int _base);
  unsigned long __strtoulDP(const char __dm *a, char __pm **b, int _base);
  unsigned long __strtoulPD(const char __pm *a, char __dm **b, int _base);
  unsigned long __strtoulPP(const char __pm *a, char __pm **b, int _base);

# 172 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\stdlib.h"

  int atoi(const char *a);


  long atol(const char *a);


  long strtol(const char *a, char **b, int _base);


  unsigned long strtoul(const char *a, char **b, int _base);














 




  float __atoffD(const char __dm *_bptr);
  float __atoffP(const char __pm *_bptr);

  long double __atofD(const char __dm *_bptr);
  long double __atofP(const char __pm *_bptr);

_Pragma(""linkage_name ___atofD")            _Pragma("linkage_name ___atofD")
  long double atold(const char *_bptr);

  float __strtodfDD(const char __dm *_nptr, char __dm **_endptr);
  float __strtodfDP(const char __dm *_nptr, char __pm **_endptr);
  float __strtodfPD(const char __pm *_nptr, char __dm **_endptr);
  float __strtodfPP(const char __pm *_nptr, char __pm **_endptr);

  long double __strtodDD(const char __dm *_nptr, char __dm **_endptr);
  long double __strtodDP(const char __dm *_nptr, char __pm **_endptr);
  long double __strtodPD(const char __pm *_nptr, char __dm **_endptr);
  long double __strtodPP(const char __pm *_nptr, char __pm **_endptr);

_Pragma(""linkage_name ___strtodDD")            _Pragma("linkage_name ___strtodDD")
  long double strtold(const char *_nptr, char **_endptr);


# 297 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\stdlib.h"


  double atof(const char *_bptr);

  double strtod(const char *_nptr, char **_endptr);







# 316 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\stdlib.h"







 




  int  abs(int _j);
  int  avg(int _a, int _b);
  int  max(int _a, int _b);
  int  min(int _a, int _b);
  int  clip(int _a, int _b);

  long labs(long _j);
  long lavg(long _a, long _b);
  long lmax(long _a, long _b);
  long lmin(long _a, long _b);
  long lclip(long _a, long _b);

# 349 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\stdlib.h"

# 364 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\stdlib.h"

# 408 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\stdlib.h"








 




  int    rand(void);
  void   srand(unsigned int _seed);

  void  *calloc(size_t _nmemb, size_t _size);
  void  *malloc(size_t _size);
  void  *realloc(void *_prt, size_t _size);
  void   free(void *_ptr);

#pragma noreturn
  void   abort(void);
#pragma noreturn
_Pragma(""linkage_name __exit")
_Pragma("linkage_name __exit")

  void   exit(int _status);

  char  *getenv(const char *_name);
  int    system(const char *_string);


  typedef void _t_atexit_fp(void);
  typedef int _t_compare_fp(const void *, const void *);

  int   atexit(_t_atexit_fp);

  void *bsearch(const void*, const void*, size_t, size_t, _t_compare_fp);
  void  qsort(void*, size_t, size_t, _t_compare_fp);

# 474 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\stdlib.h"







 




  int    _heap_lookup_name(char * _heap_name);
  void  *_heap_calloc(int _heap_index, size_t _nmemb, size_t _size);
  void   _heap_free(int _heap_index, void *_ptr);
  void  *_heap_malloc(int _heap_index, size_t _size);
  void  *_heap_realloc(int _heap_index, void *_prt, size_t _size);
  int    _heap_install(void *base, size_t length, int userid, int pmdm  );


  int    _heap_switch(int _heap_index);
  int    set_alloc_type(char * _heap_name);






# 508 "C:\\Program Files\\Analog Devices\\VisualDSP 4.5\\213xx\\include\\stdlib.h"











 




  int count_ones(int x);
  
_Pragma(""linkage_name _count_ones")                   _Pragma("linkage_name _count_ones")
  int lcount_ones(long x);








# 3 "process.c"
# 1 "filt_num.h"

# 4 "process.c"











float buff_tmp[(100)] = {};
int i_tmp = 0;

#pragma align 4
float __dm input1R[(500)+1];
#pragma align 4
float __dm input1L[(500)+1];

#pragma align 4
float __dm input2R[(2000)+1];
#pragma align 4
float __dm input2L[(2000)+1];

#pragma align 4
float __dm input3R[(500)+1];
#pragma align 4
float __dm input3L[(500)+1];

#pragma align 4
float __dm input1R2[(500)+1];

#pragma align 4
float __dm input2R2[(2000)+1];




extern float __dm inputR[(41)+1];

extern float __dm inputL[(41)+1];

extern float __dm noiseN[(41)+1];



#pragma optimize_for_speed
int i1 = 0;
int i2 = 0;
int i3 = 0;
int j;
int k;
int k_input;
int ix;




int m1 = 0;
int mh = 0;
int m2 = 0;
int m3 = 0;
float out_2;
extern float out_1;
extern int i_dec;
extern float out_test1;



int fxlmsFlag = 0;
int identFlag = 0;
int ident3Flag = 0;
int resetFlag = 1;

int delayCtnrLimit = 2500;
int delayCtnr=0;
int delayCtnr2=0;
int delayCtnr3=0;
int delayCtnr4=0;
int delayCtnr5=0;
int delayCtnrIdnet=0;
int delayCtnrIdnetLimit=500000;	

int flagTest(int mask);
int readDAIpin(int mask);
void handle_LED(int led_value);
int led_value=0;


#pragma align 4
float __pm coefs_dec[(41)] = {
# 1 "coef_dec.dat"
-0.001274,
-0.007595,
-0.010702,
-0.017447,
-0.024815,
-0.032741,
-0.040185,
-0.046046,
-0.049109,
-0.048231,
-0.042517,
-0.031473,
-0.015152,
0.005806,
0.030144,
0.056110,
0.081607,
0.104415,
0.122456,
0.134026,
0.138010,
0.134026,
0.122456,
0.104415,
0.081607,
0.056110,
0.030144,
0.005806,
-0.015152,
-0.031473,
-0.042517,
-0.048231,
-0.049109,
-0.046046,
-0.040185,
-0.032741,
-0.024815,
-0.017447,
-0.010702,
-0.007595,
-0.001274,
# 96 "process.c"
	};  
float __pm coefs_h[(51)] = {
# 1 "coef_h.dat"
-0.0138120116843402,
-0.0278915650661487,
0.321361594689442,
-0.847761951135346,
1.84049312029686,
-2.83616598630143,
4.11282617998750,
-4.63399436680408,
5.01558277604208,
-3.74331730743337,
2.15136977005864,
1.65207985640190,
-5.28501771060238,
10.6978551565043,
-14.2394942679099,
18.2541171530111,
-18.3477501018801,
17.4197704252848,
-10.7549021391025,
2.33799233538712,
11.8846350623490,
-25.9595619367889,
43.8805239479583,
-58.0917867529711,
73.7281641046200,
-80.7372838010770,
86.6723286461675,
-79.5642444344689,
71.5935965058564,
-55.5721677859524,
41.3399564404035,
-24.0740555317716,
10.8424469502511,
2.09671193790651,
-9.47191375100952,
15.0484259010610,
-15.5241990703033,
15.0999070144241,
-11.4898041542109,
8.39630810474066,
-4.02023018641806,
1.21238059802972,
1.51387156565985,
-2.50524163692953,
3.15656517286130,
-2.69808904799332,
2.16113255593527,
-1.29176782552589,
0.675656820053946,
-0.215065189555539,
0.0360565154087356,
# 99 "process.c"
	};  	
float __dm inRdata;
float __dm inLdata;
float __dm inNoise;
float inNoiseArray1[(500)+1];
float inNoiseArray3[(500)+1];


float coefs_filter_1 [(500)] = {
# 1 "A2.dat"
0.0012618117,
0.0008313859,
-0.0011066712,
-0.0010564048,
0.00065113872,
-3.5632918E-005,
-0.00063473638,
0.00038460523,
0.00059750461,
-0.00038880331,
-0.0012091495,
-0.00033504976,
0.00076291978,
0.00033913652,
1.0675755E-005,
0.00095814682,
0.0010334273,
0.00012338489,
0.011273699,
0.043178938,
-0.035810437,
-0.26753664,
-0.11608367,
0.4622162,
0.45346087,
-0.13566607,
-0.31328046,
-0.051049557,
0.092911959,
-0.021815607,
-0.075815573,
0.04684614,
0.032531384,
-0.068704426,
-0.021972993,
0.0097660786,
-0.066512696,
-0.05445613,
0.057893254,
0.038556606,
-0.075440757,
-0.054069683,
0.023082752,
0.011472061,
-0.003330258,
0.016844356,
0.0050682756,
-0.023302505,
-0.013525466,
0.0086474186,
-0.00068606134,
-0.011264547,
0.00071947393,
-0.00077745144,
-0.00731281,
0.024253253,
0.044126019,
-0.0040893429,
-0.038713757,
0.00023720296,
0.019865032,
-0.013622035,
-0.0028766734,
0.04471086,
0.024650732,
-0.031442296,
-0.022056036,
0.017830083,
0.0092216544,
-0.013495301,
0.00013124051,
0.018055983,
0.010968718,
0.0049476409,
0.016042659,
0.020542286,
0.003693826,
-0.016119896,
-0.015453083,
0.0040416135,
0.018171808,
0.011440319,
-0.00490371,
-0.011156684,
-0.0032693872,
0.0064482219,
0.0071602901,
0.0012530999,
-0.0017175523,
-0.001720709,
-0.0015749427,
0.0018172666,
0.0065325703,
0.0053039622,
-0.0044370452,
-0.012651756,
-0.0087998202,
0.0027902569,
0.0080670379,
-0.00019933257,
-0.010609401,
-0.008918847,
-0.001237529,
-0.00064621214,
-0.0019447149,
0.0044733365,
0.0082658278,
-0.00078292395,
-0.0088874428,
-0.0064216647,
-0.0029330913,
-6.5282533E-005,
0.0040371544,
0.0017847427,
-0.0036690189,
-0.0024477025,
-0.00041052559,
-0.0029919657,
-0.0046504154,
-0.00045965114,
0.010093153,
0.014338782,
0.00076726155,
-0.013406014,
-0.011753782,
-0.0013232398,
0.0075517935,
0.0062908153,
-0.0030443885,
-0.0046924581,
0.0034434721,
0.0038894725,
-0.0058154785,
-0.0067461692,
0.003821475,
0.0060251299,
-0.0037226307,
-0.0094628548,
-0.0042427997,
0.0047991383,
0.0078888983,
0.0020650662,
-0.0040355134,
-0.0016359906,
0.0037917821,
0.0029573839,
-0.00084332115,
-0.0018218963,
0.00043149944,
0.0036496946,
0.0019267186,
-6.0237813E-005,
0.003668265,
0.0021520697,
-0.001882786,
0.0016012049,
0.0024251603,
0.00013598874,
0.0018474122,
-8.4223211E-005,
-0.0039076004,
-0.00061526662,
0.003733238,
0.0050307205,
0.004602877,
-0.0012921919,
-0.0078117657,
-0.0047818832,
0.0048635923,
0.0076706042,
0.0016504988,
-0.0032679366,
-0.0050049429,
-0.0017670686,
0.0044769389,
0.0033617613,
-0.0011281882,
-0.00015771469,
0.00032896025,
-0.0034216512,
-0.0030052166,
0.0043379329,
0.0079342425,
0.00071158219,
-0.0067212717,
-0.0032207121,
0.0023526021,
0.0019052202,
0.0030786158,
0.0062125269,
0.0014199669,
-0.0078942003,
-0.0082140025,
-0.00039087053,
0.0047344035,
0.005787333,
0.0039442037,
-0.0019090477,
-0.0080065308,
-0.0062619117,
0.0013013429,
0.0024895754,
-0.00065566407,
0.00096876686,
0.0022292044,
-0.00092391757,
-0.0018545827,
-0.00026252336,
-0.0015138723,
-0.0024057687,
0.0018631017,
0.0044579967,
-4.2291787E-005,
-0.005271913,
-0.0047655264,
0.00033120974,
0.001919848,
-0.0020823674,
-0.0021151856,
0.002596529,
0.0032092747,
-0.0023827869,
-0.0057903533,
-0.0031021247,
0.00087892351,
0.0020015894,
-0.0010028647,
-0.0015819599,
0.0034509737,
0.0027825928,
-0.003933304,
-0.0036190462,
0.00083462114,
-0.00030788392,
-0.0012600637,
0.0033134238,
0.004155837,
-0.00050518225,
-0.0017333091,
0.0019207852,
0.0043410123,
0.0012217244,
-0.0039994582,
-0.0044206618,
-0.00075845339,
0.00072622392,
0.00055173092,
0.0032497698,
0.0048685507,
0.0011958684,
-0.0042536841,
-0.0062922966,
-0.00092245481,
0.0060973298,
0.0044891336,
-0.0020219972,
-0.0041628093,
-5.4636539E-006,
0.0027461222,
-0.002081434,
-0.0055376892,
0.00088797184,
0.0064826361,
-0.00021126942,
-0.0097768782,
-0.005937106,
0.0044943755,
0.0050778473,
0.00016884977,
-0.00014374623,
0.0014236637,
-0.00048679672,
-0.0040805656,
-0.0019069385,
0.0042527285,
0.0052761729,
0.0021515517,
-0.001591555,
-0.0033826167,
0.0012485712,
0.0060881283,
0.0012801642,
-0.005390448,
-0.0025476136,
0.0042736535,
0.0047712517,
0.00065397366,
-0.0013734221,
-0.0027634944,
-0.0058671026,
-0.0046394048,
0.0012510107,
0.0017626346,
-0.0012032161,
0.0015633473,
0.0025793002,
-0.0034705878,
-0.0045983107,
0.0011334986,
0.0028810606,
-0.00097254105,
-0.0013851611,
0.0020022483,
-0.0011576865,
-0.0067223767,
-0.0021496927,
0.0055871643,
0.0052440269,
9.9384248E-005,
-0.0035310122,
-0.0039653727,
-0.0024896339,
0.0015110498,
0.0055986308,
0.0022544989,
-0.0028122461,
-0.00074601348,
0.0023528025,
8.2975697E-005,
-0.0033184742,
-0.0033635693,
-0.0020181085,
-0.0017420866,
-0.0002553529,
0.0028259004,
0.0025272146,
-0.00075719552,
-0.0010932476,
0.0011096136,
0.0024220368,
0.00255247,
0.0018804497,
0.00054222043,
-0.00024177707,
-0.00021869241,
0.00026949309,
0.0010004758,
0.000571877,
0.00030061373,
0.0008502577,
0.0011203678,
0.001387437,
0.00015282555,
8.4316998E-006,
0.00056676636,
-0.0018618001,
-0.0014067676,
0.0010117409,
-0.0015817956,
-0.0035950928,
-0.000738331,
0.0019163205,
0.00082193426,
-0.0013637766,
-0.00024685854,
0.0035793066,
0.0038838633,
0.00045689021,
-0.00095233863,
-0.0010897418,
-0.0023959198,
-0.00046549778,
0.0030520449,
-0.00015358521,
-0.0041486486,
-0.00088912406,
0.0015815983,
-0.0020911735,
-0.0036584339,
0.0013453928,
0.0058248551,
0.0034158423,
-0.0014734752,
-0.00095505832,
0.0015727191,
-0.0016730414,
-0.0049722688,
-0.000888829,
0.0033946119,
0.0018445341,
-0.0010937309,
-0.0026405794,
-0.0013741889,
0.0014853822,
0.00042993101,
-0.0022919266,
-0.00064074632,
0.00055088225,
-0.0020821639,
-0.0012809749,
0.0023265621,
0.0014647675,
-0.00056854903,
-0.00019608081,
0.00020052008,
0.00015338087,
-0.0010698834,
-0.0024331911,
-0.0023061761,
-0.0023976429,
-0.0011853493,
0.0018817957,
0.00014907839,
-0.004268724,
-0.0011343901,
0.004515117,
0.0020944192,
-0.0017640903,
0.00075852085,
0.0026434301,
0.00079043373,
0.00018493294,
-0.00040945577,
-0.0011883777,
0.00050574244,
0.0014194532,
-0.00050872413,
-0.0012269842,
0.00088516588,
0.0013452994,
-0.00013502905,
-0.00012334551,
-0.00026045609,
-0.00042667188,
0.00060679455,
0.000167016,
-0.0005866196,
-0.00049553491,
-0.0011604372,
-0.0012928613,
0.00053880864,
0.0022506155,
0.0015102297,
-0.00028640541,
-0.0010835289,
-0.0023667398,
-0.002398829,
0.0012636977,
0.0033052231,
0.0010786857,
-0.00018800997,
0.0011564428,
-2.8203714E-005,
-0.0022337914,
-0.00030082758,
0.0012541548,
-0.00057643105,
-0.0015784869,
-0.00079977739,
-5.6911518E-005,
0.00026882382,
0.00033530034,
0.00030650693,
0.0008891137,
0.00027523909,
-0.0017776316,
0.00014431527,
0.0039531668,
0.0020484834,
-0.0020681261,
-0.0010805303,
0.00087035896,
-0.00017109164,
-0.0006054003,
0.0013611105,
0.002744325,
0.00069315429,
-0.0020201399,
-0.0017064378,
0.00078468985,
0.0014442188,
-0.0016797722,
-0.002701286,
0.001344686,
0.0032631527,
0.00049174583,
-0.0013847176,
-0.0019077312,
-0.0026854421,
-0.0011875917,
0.0012420409,
0.001072222,
0.00067129877,
0.00089938985,
3.9567461E-005,
-0.0013819073,
-0.0018229999,
-0.00025384632,
0.0025981565,
0.002683351,
-0.00058160716,
-0.0025688515,
-0.002668764,
-0.0015356725,
-0.00015829719,
-0.00059995876,
0.00062251958,
0.0024950276,
-4.8922597E-005,
-0.0026882954,
# 109 "process.c"
	};   
float un1 [(500)];
float mu1 = 0.0001;		
float yn1 =0;
float err1 = 0;

float coefs_filter_2 [(2000)]; 
float un2 [(2000)];
float performance = 0;
int AD_bit = 24;
int FS = 1677715;

float lambda = 0.01;			
float beta = 1;


								
									
									
								
									
									




float mu2 		= 0.000008;		
float mu2def	= 0.000008;		
float mu2_0     = 0.0001;		



float yn2 =0;
float err2 = 0;
float err2arr[(51)+1] = {};
float inputRfil_n = 0;
float inputRfil[(51)+1];

float inputH_n = 0;
float inputH[(2000)+1] = {};



float coefs_filter_3 [(500)] = {
# 1 "A3.dat"
6.8381582E-005,
2.5127247E-005,
-0.00013396055,
-0.00018313123,
1.732175E-005,
0.00013135746,
-3.779187E-005,
-8.9425484E-005,
3.0044934E-005,
3.3619315E-005,
-1.7626879E-005,
2.4365563E-005,
6.9561996E-005,
3.8417013E-005,
1.018032E-005,
-4.1046451E-006,
1.6642469E-005,
5.0338731E-005,
1.1013844E-005,
-1.7721293E-006,
2.893541E-005,
6.6344568E-005,
8.2770777E-005,
-1.6029597E-005,
-0.0001078368,
-1.60814E-005,
6.1759623E-005,
2.7517333E-005,
2.8663428E-005,
5.1626983E-005,
-4.55554E-005,
-0.00014305589,
-1.7185495E-005,
9.4162788E-005,
-4.8467504E-005,
-9.9314137E-005,
4.8256312E-005,
0.00010640879,
6.8365072E-005,
0.00016211782,
0.00025805717,
-0.00056060991,
-0.0022126376,
-0.0014195369,
0.0028298367,
0.0052112057,
0.0025515936,
-0.0020972097,
-0.0037287583,
-0.00028508919,
0.003227782,
0.0019299468,
-0.0017999789,
-0.0041351281,
-0.0034445433,
7.7890536E-006,
0.0020708507,
0.00029686993,
-0.0013985197,
-0.00094850117,
-0.00037092299,
0.00015871058,
0.00081885257,
0.00057034066,
-0.00018103403,
-0.00054950698,
-0.00051744457,
0.00026541544,
0.0011244218,
-5.7616789E-006,
-0.0016939931,
-0.00099019916,
0.00062073662,
0.0011985097,
0.00058193842,
-0.00068750809,
-0.00063993671,
0.00049521652,
0.00093257433,
0.00062291365,
0.00027317973,
0.00098831044,
0.0013958453,
-0.00047823318,
-0.0016024497,
0.00036208119,
0.0019170088,
0.0004838637,
-0.0013239068,
-0.000669781,
0.00083365798,
0.00062548212,
-0.00011382933,
0.00029249385,
0.00045502442,
-0.0003970883,
-0.00017187657,
0.0012798952,
0.0010866805,
-0.00066284224,
-0.00076838623,
0.00078849634,
0.001124769,
-0.00030541213,
-0.0012488813,
-0.00013848703,
0.0011384082,
0.00036425568,
-0.00076490629,
-0.0005003541,
-0.00027644096,
-0.00050747395,
-0.00039217263,
-0.00079321204,
-0.0010735113,
0.00032645839,
0.0016153326,
0.00070025661,
-0.00089407974,
-0.001098403,
-0.00057236134,
-0.00035813628,
-1.4912988E-005,
0.00077838782,
0.0014849863,
0.00066009973,
-0.0013915099,
-0.0018318222,
-0.00082149392,
-0.0005811514,
-0.00017022964,
0.001371677,
0.0015838373,
-0.00035600111,
-0.0014197731,
-0.00053564116,
0.00019595906,
0.00021673687,
0.00060614076,
0.00092635158,
6.2785148E-005,
-0.00081996876,
-0.00029774616,
0.00031518549,
-0.00025186894,
-0.00099041278,
-0.00059612177,
0.00071492355,
0.0011973962,
0.00028101329,
-0.00052601931,
-0.0006546611,
-0.00084014185,
-0.00055725925,
0.0010000705,
0.0019126858,
0.00036587377,
-0.0011808837,
-0.00060106843,
-8.1500526E-005,
-0.00060055999,
-0.00014278381,
0.00078639935,
0.00043336733,
-0.0004131654,
-0.00050768803,
8.8553505E-005,
0.00048462389,
0.00023492954,
9.1162154E-005,
0.00041034244,
0.00033912749,
-0.00020056778,
-0.0003123924,
0.0003979622,
0.00083271618,
5.9840309E-005,
-0.00042502183,
-0.00017063429,
-0.00015905127,
0.00010722931,
0.00063302321,
0.00087497756,
0.00066451478,
-0.00017445296,
-0.00066839863,
-0.00032021309,
4.7004673E-006,
0.00040959558,
0.00072890415,
-6.7159264E-005,
-0.0012799405,
-0.0011263116,
4.0543153E-005,
0.00037199998,
-0.00019442345,
-0.000284168,
0.00040454807,
0.00055866415,
-0.00034597769,
-0.00084833713,
-0.00028463895,
0.00033362865,
0.0002806579,
0.00018223825,
0.00046116786,
-3.2696054E-005,
-0.0011255884,
-0.00075179921,
0.00076070504,
0.0007390239,
-0.00056626397,
-0.00058748544,
0.00031490967,
0.00026477512,
-0.00031434852,
-0.00024536237,
0.00014281772,
0.00019207266,
0.00023791326,
0.00043997733,
0.00044519591,
0.00011057509,
-0.00034212883,
-0.00042254897,
-5.8852722E-005,
4.5207042E-005,
7.0592738E-005,
0.00065975217,
0.0010606883,
0.00044538995,
-0.00066095626,
-0.0010049836,
-0.00033610233,
0.00019078086,
2.7551398E-006,
-0.00017061195,
0.00017339185,
0.00050420745,
8.5882559E-005,
-0.00061429577,
-0.00057537749,
-1.406659E-005,
0.00021402702,
2.4169389E-005,
-0.00018962206,
-0.00020160654,
2.1936357E-005,
0.00031974641,
0.00014819526,
-0.00032975414,
-0.00037098333,
-3.5632034E-005,
0.0006108284,
0.00077513431,
-0.00030014652,
-0.00094946113,
-8.8108914E-005,
0.00070148526,
0.00010289223,
-0.0005354904,
0.00014114189,
0.00097839884,
0.00048627533,
-0.00061328046,
-0.00061124912,
0.0001630615,
0.00043260763,
0.00051313109,
0.0006193865,
0.00016178482,
-0.00040552916,
-0.00029242178,
5.4834218E-005,
3.2418877E-005,
-2.301355E-005,
0.00036027032,
0.00071557431,
0.00020223802,
-0.00072402542,
-0.00080998335,
1.0459498E-005,
0.00019279456,
-0.00059239811,
-0.00025333354,
0.00073349703,
-0.00015227255,
-0.0011465208,
0.00015141979,
0.0011903024,
-8.7265274E-005,
-0.0010984213,
-0.00027096336,
0.00039550127,
4.2726118E-005,
-0.0002715849,
-0.00016919598,
-3.4579673E-005,
-0.00022145301,
-0.00024275073,
0.00030404402,
0.00035136449,
-0.00038298356,
-0.00048184031,
0.00029122224,
0.00051625003,
-4.0872772E-005,
-0.0004328721,
-0.00051593158,
-0.00045440867,
0.00010158738,
0.00078855996,
0.00042626748,
-0.00059186929,
-0.00045335453,
0.00050232699,
0.00022089423,
-0.0009196644,
-0.00057632988,
0.00085805741,
0.00099594018,
6.3591157E-005,
-0.00051701278,
-0.0005560242,
-5.0684657E-006,
0.00063814904,
0.00068798597,
0.0002358909,
5.6474542E-005,
0.0003722088,
0.00021175441,
-0.00011839753,
0.00010969993,
-3.8873361E-005,
-0.00046869769,
-0.00026801569,
3.4384942E-005,
-2.8562232E-005,
-0.00027822162,
-0.00015837135,
0.00036474073,
0.00032491819,
-0.00013702099,
-0.00012379921,
0.00020879827,
0.00019559152,
0.00012407009,
0.00043287015,
0.00024825794,
-0.00050665496,
-0.00029326126,
0.00034255732,
0.00019065404,
0.00012123174,
0.00025360871,
-4.0459014E-005,
-0.000135227,
0.00015009413,
0.00021113672,
0.0001359071,
0.00012004732,
4.0527855E-005,
0.0002066024,
0.00025367874,
-0.00038086594,
-0.00058509514,
3.133588E-005,
0.0002022039,
-5.6559478E-005,
6.9745707E-005,
-0.0001539998,
-0.00096002006,
-0.00061054283,
0.00068488822,
0.00059723976,
-0.00048707362,
-0.00043743011,
0.000126119,
-0.00030249599,
-0.00069676165,
0.00010378705,
0.0010086081,
0.00035133492,
-0.0010021495,
-0.00082453561,
0.00025950349,
0.00046645181,
0.00013807397,
4.4835109E-005,
0.00011933772,
6.8756264E-005,
1.4903148E-006,
-7.9237405E-005,
-0.00035216616,
-0.00040187966,
-0.00016892882,
3.4160937E-006,
6.2831539E-005,
9.8577257E-005,
-7.8507306E-005,
-0.00047225947,
-0.00037950306,
9.8616092E-006,
5.0065577E-005,
0.00024279788,
0.00049976271,
0.0001716948,
-0.00015880304,
0.00012610739,
0.00052248815,
0.00036269621,
-4.0258041E-005,
0.00019033553,
0.0005264685,
-4.7681588E-005,
-0.00046238292,
9.0753936E-005,
8.2606704E-005,
-0.0005337093,
-0.00028320018,
4.8781898E-005,
-0.00034582429,
-0.00033702576,
0.00033996231,
0.00054100191,
0.0001589825,
9.0003661E-005,
0.00033400473,
0.00026561719,
-9.166271E-005,
1.2075063E-005,
0.00038575535,
-2.9072142E-005,
-0.00045288913,
9.009763E-005,
0.00048164674,
5.6175082E-005,
-0.00051200221,
-0.00064586761,
-0.00027033308,
0.00024244511,
0.00033199377,
0.00010496646,
2.9788207E-005,
-0.00027724745,
-0.00068806374,
-8.3475221E-005,
0.0008069849,
0.00040669137,
-0.00027718046,
-5.4610522E-005,
-3.8530809E-005,
-0.00055440766,
-0.00034305107,
0.00040129182,
0.0004531173,
4.2309384E-005,
-0.00017499918,
-0.00039888377,
-0.0003135968,
0.00022610631,
0.0004904985,
0.00024216267,
-0.00017941231,
-0.0003647464,
-5.6060871E-006,
0.0003185742,
0.00013284433,
-0.00011200178,
-0.00035469656,
-0.00037152114,
0.0002431132,
0.00061625411,
0.00028819259,
0.00016217823,
0.00035494476,
-7.7006262E-005,
-0.0009519197,
-0.00084071292,
0.00026136762,
0.0007738602,
0.00047719845,
0.00018451668,
-0.00011633873,
-0.00051110931,
-0.00046310842,
0.00010189644,
0.00044214839,
0.00026179804,
-3.1789899E-005,
-0.00013750247,
-0.00013480963,
-0.00014908866,
-0.0001742522,
-3.0065054E-005,
0.00054128736,
0.00071346498,
-0.00019453888,
-0.00073641184,
-0.00015262589,
# 154 "process.c"
	};
float mu3 = 0.0001;		
float yn3 =0;
float err3 = 0;
float yfila3=0;
float yn2array [(500)+1];
	
float noise1[(500)+1];
float noise2[(2000)+1];
float noise3[(500)+1];
float noise_n;
float noise[2000];
int noiseFlag = 0;

float RightInPrev=0;
float alpha=0.00001;

void process(void)
{
    
    
    isProcessing = 1;

    
    setDAIproc();    

	

	







	if(readDAIpin(1<<19)>0){		
	    led_value |= 1 << 3;
	} else{
	    led_value &= ~(1 << 3);
	}
	

	if(readDAIpin(1<<18)>0){		
	    led_value |= 1 << 2 ;
	} else{
	    led_value &= ~(1 << 2);
	}


	if(flagTest((0x00000010))!=0){			
	    led_value |= 1 << 1;
	} else{
	    led_value &= ~(1 << 1);
	}


	if(flagTest((0x00000004))!=0){			
	    led_value |= 1 << 0;
	} else{
	    led_value &= ~(1 << 0);
	}
	
	
	if(flagTest((0x00000010))!=0)	{delayCtnr++;}		
	if(flagTest((0x00000004))!=0)	{delayCtnr2++;}		
	if(readDAIpin(1<<19)>0 && readDAIpin(1<<18)>0)	{delayCtnr3++;}		
	if(readDAIpin(1<<19)>0)	{delayCtnr4++;}		
	if(readDAIpin(1<<18)>0)	{delayCtnr5++;}		
	
	
	
	if(!(flagTest((0x00000010))!=0) && delayCtnr >= delayCtnrLimit){			
	   	delayCtnr =0;
		if(fxlmsFlag == 0){fxlmsFlag = 1;}
	   	else {fxlmsFlag = 0;}
	}
	
	
	if(!(flagTest((0x00000004))!=0) && delayCtnr2 >= delayCtnrLimit){			
	   	delayCtnr2 =0;
		if(identFlag == 0){identFlag = 1;}
	   	else {identFlag = 0;}
	}
	
	
	
	if(readDAIpin(1<<18)>0 && resetFlag == 1){		
	    fxlmsFlag = 0;
	    mu2 = mu2def;
	    inputRfil_n = 0;
	    yfila3 = 0;
	    err2 = 0;
	    for(k=0; k<(2000);k++){
	    	coefs_filter_2[k] = 0;
	    	inputH[k] = 0;
	    }
	   	for(k=0; k<((500)+1);k++){
	    	input1R2[k] = 0;
	    	inNoiseArray1[k] = 0;
	    }
	    
	    for(k=0; k<((2000)+1);k++){
	    	input2R2[k] = 0;
	    	
	    }
	    
	    for(k=0; k<((500)+1);k++){
	    	yn2array[k] = 0;
	    	inNoiseArray3[k] = 0;
	    }
	    for(k=0; k<(51); k++){
	    	inputRfil[k] = 0;
	    	err2arr[k] = 0;
	    }
	}
	
	
	if(!(readDAIpin(1<<19)>0) && !(readDAIpin(1<<18)>0) && delayCtnr3 >= delayCtnrLimit){			
	   	delayCtnr3 =0;
		if(resetFlag == 1){resetFlag = 0;}
	   	else {resetFlag = 1;}
	}
	
	
	if(resetFlag == 0 && !(readDAIpin(1<<19)>0) && delayCtnr4 >= delayCtnrLimit){			
	   	delayCtnr4 =0;
		mu2 = mu2*2;
	}
	
	
	if(resetFlag == 0 && !(readDAIpin(1<<18)>0) && delayCtnr5 >= delayCtnrLimit){			
	   	delayCtnr5 =0;
		mu2 = mu2/2;
	}
	
	
	
	if(resetFlag == 1){			
	    led_value |= 1 << 4;
	    led_value |= 1 << 5;
	    led_value |= 1 << 6;
	    led_value |= 1 << 7;
	} 
	else{
	    led_value &= ~(1 << 4);
	    led_value &= ~(1 << 5);
	    led_value &= ~(1 << 6);
	    led_value &= ~(1 << 7);
	}
	
	
	if(identFlag == 1){			
	    led_value |= 1 << 0;
	} 
	else{
	    led_value &= ~(1 << 0);
	}
	
	
	if(fxlmsFlag == 1){			
	    led_value |= 1 << 1;
	} 
	else{
	    led_value &= ~(1 << 1);
	}
	
	
	if(ident3Flag == 1){			
	    led_value |= 1 << 2;
	} 
	else{
	    led_value &= ~(1 << 2);
	}
	
	




		if((identFlag==1) || (ident3Flag==1)){
		    
				noise_n = (float)(rand()<<1);
				noise_n = noise_n / (1<<31);
				
		    
			
		}



   
   
    
    

	    m1--;
		if (m1<0)
		{
			m1 = (500)-1;
		}
		mh--;
		if (mh<0)
		{
			mh = (51)-1;
		}
		
		m2--;
		if (m2<0)
		{
			m2 = (2000)-1;
		}
		
		m3--;
		if (m3<0)
		{
			m3 = (500)-1;
		}

		
		
		
	    
	    
	    	inRdata	= conv_asm( coefs_dec, &(inputR[i_dec]), inputR, (41));
			inLdata	= conv_asm( coefs_dec, &(inputL[i_dec]), inputL, (41));
			
			inNoise = noise_n;
			inNoiseArray1[m1] = inNoise;
			if (m1 == 0)
			{
			 inNoiseArray1[(500)] = inNoise; 
			}
			inNoiseArray3[m3] = inNoise;
			if (m3 == 0)
			{
			    inNoiseArray3[(500)] = inNoise;
			}
			out_2 = rightIn;
		


		i_tmp--;
		if (0>i_tmp)
		{
	 		i_tmp = (100)-1;  
		}
		
		int i_minus1 = i_tmp - 1;
	
		if (i_tmp == 0)			
		{
			i_minus1 = (100)-1;
		}
	
		buff_tmp[i_tmp] = inLdata * inLdata; 
		performance = performance - (buff_tmp[i_minus1]/(100)) + (buff_tmp[i_tmp]/(100));
		

   
    
    



	



	if(identFlag == 1){			
	
		yn1 = 0;
		yn1 = conv_asm( coefs_filter_1, &(inNoiseArray1[m1]), inNoiseArray1, (500));		
		err1 = inLdata - yn1;
		
		k = 0; 
		k_input = m1;
		for(k; k<((500)); k++){  
		    coefs_filter_1[k] = coefs_filter_1[k] + mu1*err1*inNoiseArray1[k_input%(500)];		    
		    k_input++;
		    
		}
		delayCtnrIdnet++;
		
		if(delayCtnrIdnet == delayCtnrIdnetLimit/2){
		    identFlag=0; 
		    delayCtnrIdnet=0;
			ident3Flag = 1;    
		}
	}
		








	if(ident3Flag == 1){			

		
		yn3 = 0;
		yn3 = conv_asm( coefs_filter_3, &(inNoiseArray3[m3]), inNoiseArray3, (500));		
		err3 = inRdata - yn3;
		
		k = 0;
		k_input = m3;
		for(k; k<((500)); k++){  
		    coefs_filter_3[k] = coefs_filter_3[k] + mu3*err3*inNoiseArray3[k_input%(500)];	    	
		    k_input++;
		}
		
		delayCtnrIdnet++;
		
		if(delayCtnrIdnet == delayCtnrIdnetLimit/2){ident3Flag=0; delayCtnrIdnet=0;}
	}


	






	
	if(fxlmsFlag == 1){			
	
		yn2 = 0;

		input1R2[m1] = inRdata-yfila3;
		if(m1==0){
			input1R2[(500)] = inRdata-yfila3;
		}
		
		input2R2[m2] = inRdata-yfila3;
		if(m2==0){
			input2R2[(2000)] = inRdata-yfila3;
		}
		
		inputRfil_n = conv_asm( coefs_filter_1, &(input1R2[m1]), input1R2, (500));		
		inputRfil[mh] = inputRfil_n;		
		if(mh==0){
			inputRfil[(51)] = inputRfil_n;
		}
			
		inputH_n = conv_asm( coefs_h, &(inputRfil[mh]), inputRfil, (51));				
		inputH[m2] = inputH_n;
		if (m2==0)
			inputH[(2000)] = inputH_n;
				
		yn2 = -(conv_asm( coefs_filter_2, &(input2R2[m2]), input2R2, (2000)));		
		
		yn2array[m3] = yn2;
		if(m3==0){
			yn2array[(500)] = yn2;
		}

		yfila3 = conv_asm( coefs_filter_3, &(yn2array[m3]), yn2array, (500));							
		
		
		
		err2arr[mh] = inLdata;
		if (mh==0)
			err2arr[(51)] = inLdata;
		float err2_new = conv_asm( coefs_h, &(err2arr[mh]), err2arr, (51));
		k = 0;
		k_input = m2;
				
		
		mu2 = mu2_0 / (lambda + performance);
		
		for(k; k<(2000); k++){
		
		    coefs_filter_2[k] = coefs_filter_2[k] + mu2*err2_new*inputH[k_input%(2000)];		
			k_input++;
		}	

	}






	if(identFlag == 1){			
		out_1 = inNoiseArray1[m1];
	}

	if(fxlmsFlag == 1){			
	    out_1 = yn2;
	}	
	if(ident3Flag == 1){			
	    out_1 = inNoiseArray3[m3];
	}

	




	



	 


       

	
    clrDAIproc();    
	handle_LED(led_value);
	
      
    isProcessing = 0;
}

int flagTest(int mask){
        int tmpANC0;

        asm volatile(
                " %0 = flags;\n\t"
                : "=&d" (tmpANC0)
                :
                :
                );
return (   (tmpANC0&mask)    );

}



int readDAIpin(int mask){
int tmpR;

 	asm volatile(
 	     		"%0 = flags;\n\t"
 	     		: "=&F" (tmpR)
 	     		:
 	     		:
 	     		);

 	tmpR &= (0x10000000);
 	
     return ((*((volatile unsigned int *) 0x24B9))&mask);

}




void handle_LED(int led_value){
    *((volatile unsigned int *) 0x1800)=0;

    *((volatile unsigned int *) 0x1818)=(int)&led_value;  
    *((volatile unsigned int *) 0x1819)=1;
    *((volatile unsigned int *) 0x181a)=1;
    *((volatile unsigned int *) 0x1811)=1;
    *((volatile unsigned int *) 0x1812)=1;
    *((volatile unsigned int *) 0x1810)=0x400000;   

    *((volatile unsigned int *) 0x1800)=(0x00000200)|(0x00000040)|(0x00000002|0x00000004|0x00000020)|(0x00000100)|(0x00000001);
}


